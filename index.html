<!doctype html>
<html lang="th" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Taad AI Vision</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.3.1/dist/tf.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/pose@0.8/dist/teachablemachine-pose.min.js"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="/_sdk/data_sdk.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet">
  <style>
        body {
            box-sizing: border-box;
            font-family: 'Prompt', sans-serif;
        }
        
        @keyframes flicker {
            0%, 100% { opacity: 1; transform: scaleY(1); }
            25% { opacity: 0.8; transform: scaleY(0.95); }
            50% { opacity: 1; transform: scaleY(1.05); }
            75% { opacity: 0.9; transform: scaleY(0.98); }
        }
        
        @keyframes flame-dance {
            0%, 100% { transform: translateX(0) rotate(-2deg); }
            33% { transform: translateX(2px) rotate(2deg); }
            66% { transform: translateX(-2px) rotate(-1deg); }
        }
        
        @keyframes ember-float {
            0% { transform: translateY(0) scale(1); opacity: 1; }
            100% { transform: translateY(-30px) scale(0); opacity: 0; }
        }
        
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 20px rgba(251, 146, 60, 0.5); }
            50% { box-shadow: 0 0 40px rgba(251, 146, 60, 0.8), 0 0 60px rgba(239, 68, 68, 0.4); }
        }
        
        @keyframes gradient-shift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .flame-container {
            animation: flame-dance 0.5s ease-in-out infinite;
        }
        
        .flame-inner {
            animation: flicker 0.3s ease-in-out infinite;
        }
        
        .ember {
            animation: ember-float 1s ease-out infinite;
        }
        
        .camera-glow {
            animation: pulse-glow 2s ease-in-out infinite;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #0ea5e9, #3b82f6, #0ea5e9, #06b6d4);
            background-size: 400% 400%;
            animation: gradient-shift 8s ease infinite;
            position: relative;
            overflow: hidden;
        }
        
        .gradient-bg::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 15% 30%, rgba(251, 146, 60, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 85% 60%, rgba(239, 68, 68, 0.12) 0%, transparent 50%),
                radial-gradient(circle at 50% 80%, rgba(251, 191, 36, 0.1) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }
        
        .torch-bg {
            position: fixed;
            opacity: 0.3;
            z-index: 0;
            pointer-events: none;
        }
        
        .torch-bg-1 {
            top: 10%;
            left: 5%;
            width: 60px;
            height: 100px;
            animation: flame-dance 3s ease-in-out infinite;
        }
        
        .torch-bg-2 {
            top: 50%;
            right: 8%;
            width: 80px;
            height: 130px;
            animation: flame-dance 2.5s ease-in-out infinite 0.5s;
        }
        
        .torch-bg-3 {
            bottom: 15%;
            left: 10%;
            width: 70px;
            height: 115px;
            animation: flame-dance 2.8s ease-in-out infinite 1s;
        }
        
        .app-content {
            position: relative;
            z-index: 1;
        }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .result-positive {
            background: linear-gradient(135deg, #10b981, #059669);
        }
        
        .result-negative {
            background: linear-gradient(135deg, #ef4444, #dc2626);
        }
        
        .btn-gradient {
            background: linear-gradient(135deg, #f97316, #ea580c);
            transition: all 0.3s ease;
        }
        
        .btn-gradient:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(249, 115, 22, 0.4);
        }
        
        .btn-stop {
            background: linear-gradient(135deg, #ef4444, #dc2626);
        }
        
        .btn-stop:hover {
            box-shadow: 0 10px 30px rgba(239, 68, 68, 0.4);
        }

        .star-rating {
            display: flex;
            gap: 0.5rem;
            justify-content: center;
        }

        .star {
            cursor: pointer;
            transition: all 0.2s ease;
            color: rgba(255, 255, 255, 0.3);
        }

        .star:hover,
        .star.active {
            color: #fbbf24;
            transform: scale(1.1);
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body class="h-full gradient-bg text-white overflow-auto"><!-- Background Torches -->
  <svg viewbox="0 0 60 120" class="torch-bg torch-bg-1"><rect x="22" y="60" width="16" height="55" rx="3" fill="#8B4513" /> <rect x="24" y="62" width="4" height="51" fill="#A0522D" /> <ellipse cx="30" cy="58" rx="14" ry="6" fill="#CD853F" /> <ellipse cx="30" cy="56" rx="10" ry="4" fill="#DEB887" /> <g class="flame-container" transform-origin="30 50">
    <path class="flame-inner" d="M30 10 Q45 30 38 45 Q35 55 30 55 Q25 55 22 45 Q15 30 30 10" fill="#ef4444" opacity="0.9" />
    <path class="flame-inner" style="animation-delay: 0.1s" d="M30 18 Q40 32 35 44 Q33 52 30 52 Q27 52 25 44 Q20 32 30 18" fill="#f97316" />
    <path class="flame-inner" style="animation-delay: 0.15s" d="M30 25 Q36 35 33 43 Q32 48 30 48 Q28 48 27 43 Q24 35 30 25" fill="#fbbf24" />
    <ellipse cx="30" cy="42" rx="4" ry="6" fill="#fef3c7" class="flame-inner" />
   </g> <circle class="ember" cx="25" cy="20" r="1.5" fill="#fbbf24" style="animation-delay: 0s" /> <circle class="ember" cx="35" cy="22" r="1" fill="#f97316" style="animation-delay: 0.3s" /> <circle class="ember" cx="28" cy="18" r="1.2" fill="#fef3c7" style="animation-delay: 0.6s" /> <circle class="ember" cx="33" cy="15" r="0.8" fill="#fbbf24" style="animation-delay: 0.9s" />
  </svg>
  <svg viewbox="0 0 60 120" class="torch-bg torch-bg-2"><rect x="22" y="60" width="16" height="55" rx="3" fill="#8B4513" /> <rect x="24" y="62" width="4" height="51" fill="#A0522D" /> <ellipse cx="30" cy="58" rx="14" ry="6" fill="#CD853F" /> <ellipse cx="30" cy="56" rx="10" ry="4" fill="#DEB887" /> <g class="flame-container" transform-origin="30 50">
    <path class="flame-inner" d="M30 10 Q45 30 38 45 Q35 55 30 55 Q25 55 22 45 Q15 30 30 10" fill="#ef4444" opacity="0.9" />
    <path class="flame-inner" style="animation-delay: 0.1s" d="M30 18 Q40 32 35 44 Q33 52 30 52 Q27 52 25 44 Q20 32 30 18" fill="#f97316" />
    <path class="flame-inner" style="animation-delay: 0.15s" d="M30 25 Q36 35 33 43 Q32 48 30 48 Q28 48 27 43 Q24 35 30 25" fill="#fbbf24" />
    <ellipse cx="30" cy="42" rx="4" ry="6" fill="#fef3c7" class="flame-inner" />
   </g> <circle class="ember" cx="25" cy="20" r="1.5" fill="#fbbf24" style="animation-delay: 0.2s" /> <circle class="ember" cx="35" cy="22" r="1" fill="#f97316" style="animation-delay: 0.5s" /> <circle class="ember" cx="28" cy="18" r="1.2" fill="#fef3c7" style="animation-delay: 0.8s" />
  </svg>
  <svg viewbox="0 0 60 120" class="torch-bg torch-bg-3"><rect x="22" y="60" width="16" height="55" rx="3" fill="#8B4513" /> <rect x="24" y="62" width="4" height="51" fill="#A0522D" /> <ellipse cx="30" cy="58" rx="14" ry="6" fill="#CD853F" /> <ellipse cx="30" cy="56" rx="10" ry="4" fill="#DEB887" /> <g class="flame-container" transform-origin="30 50">
    <path class="flame-inner" d="M30 10 Q45 30 38 45 Q35 55 30 55 Q25 55 22 45 Q15 30 30 10" fill="#ef4444" opacity="0.9" />
    <path class="flame-inner" style="animation-delay: 0.1s" d="M30 18 Q40 32 35 44 Q33 52 30 52 Q27 52 25 44 Q20 32 30 18" fill="#f97316" />
    <path class="flame-inner" style="animation-delay: 0.15s" d="M30 25 Q36 35 33 43 Q32 48 30 48 Q28 48 27 43 Q24 35 30 25" fill="#fbbf24" />
    <ellipse cx="30" cy="42" rx="4" ry="6" fill="#fef3c7" class="flame-inner" />
   </g> <circle class="ember" cx="25" cy="20" r="1.5" fill="#fbbf24" style="animation-delay: 0.4s" /> <circle class="ember" cx="35" cy="22" r="1" fill="#f97316" style="animation-delay: 0.7s" />
  </svg>
  <div id="app" class="min-h-full flex flex-col w-full app-content"><!-- Header -->
   <header class="py-6 text-center">
    <div class="flex flex-col items-center gap-2"><img src="https://lh3.googleusercontent.com/d/1kNlYfLfMttVWXiFSY" alt="Logo" class="h-auto max-w-[140px] drop-shadow-lg" loading="lazy" onerror="console.error('Image failed to load:', this.src); this.style.background='linear-gradient(135deg, #f97316, #ea580c)'; this.style.width='140px'; this.style.height='80px'; this.style.borderRadius='12px'; this.alt='Image unavailable';">
     <h1 id="system-name" class="text-4xl font-bold text-white drop-shadow-lg tracking-wide">Taad</h1>
    </div>
   </header><!-- Navigation Tabs -->
   <div class="px-4 mb-4">
    <div class="max-w-4xl mx-auto flex gap-2"><button onclick="switchPage('camera')" id="tab-camera" class="flex-1 py-3 px-6 rounded-full font-semibold transition-all bg-white/20"> üì∑ ‡∏Å‡∏•‡πâ‡∏≠‡∏á </button> <button onclick="switchPage('evaluation')" id="tab-evaluation" class="flex-1 py-3 px-6 rounded-full font-semibold transition-all bg-white/10"> ‚≠ê ‡πÅ‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô </button>
    </div>
   </div><!-- Camera Page -->
   <main id="page-camera" class="page active flex-1 px-4 pb-6">
    <div class="max-w-4xl mx-auto space-y-6"><!-- Stats & Timer Row -->
     <div class="grid grid-cols-2 md:grid-cols-4 gap-4"><!-- User Count -->
      <div class="glass-card rounded-2xl p-4 text-center">
       <div class="text-3xl font-bold text-orange-300" id="user-count">
        0
       </div>
       <div class="text-xs text-white/70 mt-1">
        ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
       </div>
      </div><!-- Timer -->
      <div class="glass-card rounded-2xl p-4 text-center col-span-2 md:col-span-2">
       <div class="text-3xl font-bold text-cyan-300 font-mono" id="timer">
        00:00
       </div>
       <div class="text-xs text-white/70 mt-1">
        ‡πÄ‡∏ß‡∏•‡∏≤ (‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)
       </div>
      </div>
     </div><!-- Camera Section -->
     <div class="glass-card rounded-3xl p-6 camera-glow">
      <div class="flex flex-col items-center gap-4">
       <div class="relative"><!-- Camera Frame -->
        <div class="relative rounded-2xl overflow-hidden bg-gray-900 border-4 border-white/20">
         <canvas id="canvas" class="w-full max-w-[600px] aspect-square"></canvas><!-- Scanning Overlay -->
         <div id="scan-overlay" class="absolute inset-0 pointer-events-none opacity-0 transition-opacity duration-300">
          <div class="absolute top-0 left-0 w-8 h-8 border-t-4 border-l-4 border-green-400"></div>
          <div class="absolute top-0 right-0 w-8 h-8 border-t-4 border-r-4 border-green-400"></div>
          <div class="absolute bottom-0 left-0 w-8 h-8 border-b-4 border-l-4 border-green-400"></div>
          <div class="absolute bottom-0 right-0 w-8 h-8 border-b-4 border-r-4 border-green-400"></div>
         </div><!-- Camera Placeholder -->
         <div id="camera-placeholder" class="absolute inset-0 flex items-center justify-center bg-gray-800/90">
          <div class="text-center">
           <svg class="w-20 h-20 mx-auto text-white/40" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" />
           </svg>
           <p class="text-white/60 mt-2">‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á</p>
          </div>
         </div>
        </div><!-- Status Indicator -->
        <div id="status-indicator" class="absolute -top-2 -right-2 flex items-center gap-2 bg-gray-800 rounded-full px-3 py-1">
         <div id="status-dot" class="w-3 h-3 rounded-full bg-gray-500"></div><span id="status-text" class="text-xs">‡∏£‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô</span>
        </div>
       </div><!-- Control Buttons -->
       <div class="flex gap-4 flex-wrap justify-center"><button id="start-btn" onclick="startCamera()" class="btn-gradient px-8 py-3 rounded-full text-white font-semibold text-lg shadow-lg flex items-center gap-2">
         <svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" /> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
         </svg> ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô </button> <button id="stop-btn" onclick="stopCamera()" class="btn-stop px-8 py-3 rounded-full text-white font-semibold text-lg shadow-lg flex items-center gap-2 opacity-50 cursor-not-allowed" disabled>
         <svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z" />
         </svg> ‡∏´‡∏¢‡∏∏‡∏î </button>
       </div>
      </div>
     </div><!-- Analysis Results -->
     <div class="glass-card rounded-3xl p-6">
      <h2 class="text-xl font-semibold mb-4 flex items-center gap-2">
       <svg class="w-6 h-6 text-yellow-400" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
       </svg> ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå</h2>
      <div id="label-container" class="space-y-2">
       <div class="bg-white/10 rounded-xl p-4 text-center text-white/60">
        ‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå...
       </div>
      </div><!-- Main Result Display -->
      <div id="main-result" class="mt-4 p-4 rounded-xl bg-white/5 text-center hidden">
       <div class="text-2xl font-bold" id="result-class">
        -
       </div>
       <div class="text-4xl font-bold mt-2" id="result-confidence">
        0%
       </div>
      </div>
     </div><!-- Instructions -->
     <div class="glass-card rounded-3xl p-6">
      <h2 class="text-xl font-semibold mb-4 flex items-center gap-2">
       <svg class="w-6 h-6 text-green-400" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
       </svg> ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</h2>
      <div class="grid md:grid-cols-2 gap-4">
       <div class="flex items-start gap-3 bg-white/5 rounded-xl p-4">
        <div class="w-8 h-8 rounded-full bg-orange-500 flex items-center justify-center flex-shrink-0 font-bold">
         1
        </div>
        <div>
         <h3 class="font-semibold">‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô</h3>
         <p class="text-sm text-white/70">‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö</p>
        </div>
       </div>
       <div class="flex items-start gap-3 bg-white/5 rounded-xl p-4">
        <div class="w-8 h-8 rounded-full bg-orange-500 flex items-center justify-center flex-shrink-0 font-bold">
         2
        </div>
        <div>
         <h3 class="font-semibold">‡∏¢‡∏∑‡∏ô‡πÉ‡∏ô‡∏Å‡∏£‡∏≠‡∏ö‡∏Å‡∏•‡πâ‡∏≠‡∏á</h3>
         <p class="text-sm text-white/70">‡∏ß‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏Å‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î</p>
        </div>
       </div>
       <div class="flex items-start gap-3 bg-white/5 rounded-xl p-4">
        <div class="w-8 h-8 rounded-full bg-orange-500 flex items-center justify-center flex-shrink-0 font-bold">
         3
        </div>
        <div>
         <h3 class="font-semibold">‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå</h3>
         <p class="text-sm text-white/70">AI ‡∏à‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</p>
        </div>
       </div>
       <div class="flex items-start gap-3 bg-white/5 rounded-xl p-4">
        <div class="w-8 h-8 rounded-full bg-orange-500 flex items-center justify-center flex-shrink-0 font-bold">
         4
        </div>
        <div>
         <h3 class="font-semibold">‡∏ü‡∏±‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</h3>
         <p class="text-sm text-white/70">‡∏à‡∏∞‡∏°‡∏µ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</p>
        </div>
       </div>
      </div>
     </div>
    </div>
   </main><!-- Evaluation Page -->
   <main id="page-evaluation" class="page flex-1 px-4 pb-6">
    <div class="max-w-2xl mx-auto space-y-6"><!-- Evaluation Form -->
     <div class="glass-card rounded-3xl p-8">
      <h2 id="evaluation-title" class="text-3xl font-bold mb-2 text-center">‡πÅ‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏∂‡∏á‡∏û‡∏≠‡πÉ‡∏à</h2>
      <p id="evaluation-question" class="text-center text-white/80 mb-8">‡∏Ñ‡∏∏‡∏ì‡∏û‡∏∂‡∏á‡∏û‡∏≠‡πÉ‡∏à‡∏Å‡∏±‡∏ö‡∏£‡∏∞‡∏ö‡∏ö‡∏ô‡∏µ‡πâ‡∏°‡∏≤‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡πÅ‡∏Ñ‡πà‡πÑ‡∏´‡∏ô?</p>
      <form id="evaluation-form" class="space-y-6"><!-- Name Input -->
       <div><label for="eval-name" class="block text-sm font-medium mb-2">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</label> <input type="text" id="eval-name" required class="w-full px-4 py-3 rounded-xl bg-white/10 border border-white/20 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-orange-400" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì">
       </div><!-- Star Rating -->
       <div><label class="block text-sm font-medium mb-3">‡πÉ‡∏´‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</label>
        <div class="star-rating" id="star-rating">
         <svg class="star w-12 h-12" data-rating="1" fill="currentColor" viewbox="0 0 24 24"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" />
         </svg>
         <svg class="star w-12 h-12" data-rating="2" fill="currentColor" viewbox="0 0 24 24"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" />
         </svg>
         <svg class="star w-12 h-12" data-rating="3" fill="currentColor" viewbox="0 0 24 24"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" />
         </svg>
         <svg class="star w-12 h-12" data-rating="4" fill="currentColor" viewbox="0 0 24 24"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" />
         </svg>
         <svg class="star w-12 h-12" data-rating="5" fill="currentColor" viewbox="0 0 24 24"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" />
         </svg>
        </div><input type="hidden" id="rating-value" required>
        <p class="text-center text-sm text-white/60 mt-2" id="rating-text">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</p>
       </div><!-- Comment Textarea -->
       <div><label for="eval-comment" class="block text-sm font-medium mb-2">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô (‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö)</label> <textarea id="eval-comment" rows="4" class="w-full px-4 py-3 rounded-xl bg-white/10 border border-white/20 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-orange-400 resize-none" placeholder="‡πÅ‡∏ö‡πà‡∏á‡∏õ‡∏±‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì..."></textarea>
       </div><!-- Submit Button --> <button type="submit" id="submit-btn" class="w-full btn-gradient px-8 py-4 rounded-full text-white font-semibold text-lg shadow-lg flex items-center justify-center gap-2">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
        </svg> ‡∏™‡πà‡∏á‡πÅ‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô </button>
      </form><!-- Success Message -->
      <div id="success-message" class="hidden mt-6 p-4 bg-green-500/20 border border-green-400/50 rounded-xl text-center">
       <svg class="w-12 h-12 mx-auto text-green-400 mb-2" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
       </svg>
       <p class="text-lg font-semibold text-green-400">‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô!</p>
       <p class="text-sm text-white/70 mt-1">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡∏°‡∏≤‡∏Å‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏£‡∏≤</p>
      </div>
     </div><!-- Evaluation Stats -->
     <div class="glass-card rounded-3xl p-6">
      <h3 class="text-xl font-semibold mb-4 flex items-center gap-2">
       <svg class="w-6 h-6 text-yellow-400" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z" />
       </svg> ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô</h3>
      <div class="grid grid-cols-3 gap-4">
       <div class="text-center bg-white/5 rounded-xl p-4">
        <div class="text-3xl font-bold text-cyan-300" id="eval-count">
         0
        </div>
        <div class="text-xs text-white/70 mt-1">
         ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô
        </div>
       </div>
       <div class="text-center bg-white/5 rounded-xl p-4">
        <div class="text-3xl font-bold text-yellow-300" id="avg-rating">
         0.0
        </div>
        <div class="text-xs text-white/70 mt-1">
         ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢
        </div>
       </div>
       <div class="text-center bg-white/5 rounded-xl p-4">
        <div class="text-3xl font-bold text-orange-300" id="max-rating">
         0
        </div>
        <div class="text-xs text-white/70 mt-1">
         ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î
        </div>
       </div>
      </div>
     </div>
    </div>
   </main><!-- Footer -->
   <footer class="py-4 text-center">
    <p id="footer-text" class="text-white/80 text-sm">@teem taadi</p>
   </footer>
  </div>
  <script>
        // Config
        const defaultConfig = {
            system_name: 'Taad',
            footer_text: '@teem taadi',
            evaluation_title: '‡πÅ‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏∂‡∏á‡∏û‡∏≠‡πÉ‡∏à',
            evaluation_question: '‡∏Ñ‡∏∏‡∏ì‡∏û‡∏∂‡∏á‡∏û‡∏≠‡πÉ‡∏à‡∏Å‡∏±‡∏ö‡∏£‡∏∞‡∏ö‡∏ö‡∏ô‡∏µ‡πâ‡∏°‡∏≤‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡πÅ‡∏Ñ‡πà‡πÑ‡∏´‡∏ô?',
            primary_color: '#0ea5e9',
            secondary_color: '#f97316',
            text_color: '#ffffff'
        };

        let config = { ...defaultConfig };
        let currentData = [];
        let selectedRating = 0;

        // Audio Context for success sound
        let audioContext = null;

        function playSuccessSound() {
            try {
                if (!audioContext) {
                    audioContext = new (window.AudioContext || window.webkitAudioContext)();
                }
                
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.setValueAtTime(523.25, audioContext.currentTime);
                oscillator.frequency.setValueAtTime(659.25, audioContext.currentTime + 0.1);
                oscillator.frequency.setValueAtTime(783.99, audioContext.currentTime + 0.2);
                
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.4);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.4);
            } catch (e) {
                console.error('Audio playback error:', e);
            }
        }

        // Page Navigation
        function switchPage(page) {
            const pages = document.querySelectorAll('.page');
            const tabs = document.querySelectorAll('[id^="tab-"]');
            
            pages.forEach(p => p.classList.remove('active'));
            tabs.forEach(t => {
                t.classList.remove('bg-white/20');
                t.classList.add('bg-white/10');
            });
            
            document.getElementById(`page-${page}`).classList.add('active');
            document.getElementById(`tab-${page}`).classList.remove('bg-white/10');
            document.getElementById(`tab-${page}`).classList.add('bg-white/20');
        }

        // Star Rating
        const stars = document.querySelectorAll('.star');
        const ratingValue = document.getElementById('rating-value');
        const ratingText = document.getElementById('rating-text');

        stars.forEach(star => {
            star.addEventListener('click', function() {
                selectedRating = parseInt(this.dataset.rating);
                ratingValue.value = selectedRating;
                updateStars(selectedRating);
                
                const labels = ['‡πÅ‡∏¢‡πà‡∏°‡∏≤‡∏Å', '‡πÅ‡∏¢‡πà', '‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á', '‡∏î‡∏µ', '‡∏î‡∏µ‡∏°‡∏≤‡∏Å'];
                ratingText.textContent = labels[selectedRating - 1];
            });

            star.addEventListener('mouseenter', function() {
                const rating = parseInt(this.dataset.rating);
                updateStars(rating);
            });
        });

        document.getElementById('star-rating').addEventListener('mouseleave', function() {
            updateStars(selectedRating);
        });

        function updateStars(rating) {
            stars.forEach((star, index) => {
                if (index < rating) {
                    star.classList.add('active');
                } else {
                    star.classList.remove('active');
                }
            });
        }

        // Evaluation Form
        document.getElementById('evaluation-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const name = document.getElementById('eval-name').value.trim();
            const rating = parseInt(ratingValue.value);
            const comment = document.getElementById('eval-comment').value.trim();
            
            if (!rating) {
                ratingText.textContent = '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô!';
                ratingText.classList.add('text-red-400');
                return;
            }

            const submitBtn = document.getElementById('submit-btn');
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<svg class="w-6 h-6 animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á...';

            if (window.dataSdk && currentData.length < 999) {
                const result = await window.dataSdk.create({
                    evaluation_name: name,
                    evaluation_rating: rating,
                    evaluation_comment: comment,
                    evaluation_timestamp: new Date().toISOString()
                });

                if (result.isOk) {
                    document.getElementById('evaluation-form').classList.add('hidden');
                    document.getElementById('success-message').classList.remove('hidden');
                    playSuccessSound();
                    
                    setTimeout(() => {
                        document.getElementById('evaluation-form').reset();
                        document.getElementById('evaluation-form').classList.remove('hidden');
                        document.getElementById('success-message').classList.add('hidden');
                        selectedRating = 0;
                        updateStars(0);
                        ratingText.textContent = '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô';
                        ratingText.classList.remove('text-red-400');
                        submitBtn.disabled = false;
                        submitBtn.innerHTML = '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg> ‡∏™‡πà‡∏á‡πÅ‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô';
                    }, 3000);
                } else {
                    ratingText.textContent = '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà';
                    ratingText.classList.add('text-red-400');
                    submitBtn.disabled = false;
                    submitBtn.innerHTML = '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg> ‡∏™‡πà‡∏á‡πÅ‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô';
                }
            } else if (currentData.length >= 999) {
                ratingText.textContent = '‡∏ñ‡∏∂‡∏á‡∏Ç‡∏µ‡∏î‡∏à‡∏≥‡∏Å‡∏±‡∏î‡πÅ‡∏•‡πâ‡∏ß (999 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)';
                ratingText.classList.add('text-red-400');
                submitBtn.disabled = false;
                submitBtn.innerHTML = '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg> ‡∏™‡πà‡∏á‡πÅ‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô';
            }
        });

        // Teachable Machine Variables
        const URL = "./my_model/";
        let model, webcam, ctx, labelContainer, maxPredictions;
        let isRunning = false;
        let timerInterval = null;
        let seconds = 0;
        let lastSuccessTime = 0;

        // Data SDK Handler
        const dataHandler = {
            onDataChanged(data) {
                currentData = data;
                updateStats(data);
            }
        };

        function updateStats(data) {
            const sessions = data.filter(d => d.session_id);
            const evaluations = data.filter(d => d.evaluation_name);
            
            document.getElementById('user-count').textContent = sessions.length;
            document.getElementById('eval-count').textContent = evaluations.length;
            
            if (evaluations.length > 0) {
                const ratings = evaluations.map(e => e.evaluation_rating);
                const avgRating = (ratings.reduce((a, b) => a + b, 0) / ratings.length).toFixed(1);
                const maxRating = Math.max(...ratings);
                
                document.getElementById('avg-rating').textContent = avgRating;
                document.getElementById('max-rating').textContent = maxRating;
            }
        }

        function updateTimer() {
            seconds++;
            const mins = Math.floor(seconds / 60).toString().padStart(2, '0');
            const secs = (seconds % 60).toString().padStart(2, '0');
            document.getElementById('timer').textContent = `${mins}:${secs}`;
        }

        async function startCamera() {
            const startBtn = document.getElementById('start-btn');
            const stopBtn = document.getElementById('stop-btn');
            
            startBtn.disabled = true;
            startBtn.classList.add('opacity-50', 'cursor-not-allowed');
            
            try {
                if (window.dataSdk && currentData.length < 999) {
                    const result = await window.dataSdk.create({
                        session_id: Date.now().toString(),
                        timestamp: new Date().toISOString(),
                        duration: 0
                    });
                    if (!result.isOk) {
                        console.error('Failed to create session');
                    }
                }
                
                await init();
                
                stopBtn.disabled = false;
                stopBtn.classList.remove('opacity-50', 'cursor-not-allowed');
                
            } catch (error) {
                console.error('Camera start error:', error);
                startBtn.disabled = false;
                startBtn.classList.remove('opacity-50', 'cursor-not-allowed');
                
                const placeholder = document.getElementById('camera-placeholder');
                if (placeholder) {
                    placeholder.innerHTML = `
                        <div class="text-center p-4">
                            <svg class="w-16 h-16 mx-auto text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
                            </svg>
                            <p class="text-red-400 mt-2">‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÑ‡∏î‡πâ</p>
                            <p class="text-white/60 text-sm mt-1">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏Å‡∏•‡πâ‡∏≠‡∏á</p>
                        </div>
                    `;
                }
            }
        }

        function stopCamera() {
            isRunning = false;
            
            if (webcam) {
                webcam.stop();
            }
            
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
            
            const startBtn = document.getElementById('start-btn');
            const stopBtn = document.getElementById('stop-btn');
            const statusDot = document.getElementById('status-dot');
            const statusText = document.getElementById('status-text');
            const scanOverlay = document.getElementById('scan-overlay');
            const placeholder = document.getElementById('camera-placeholder');
            
            startBtn.disabled = false;
            startBtn.classList.remove('opacity-50', 'cursor-not-allowed');
            stopBtn.disabled = true;
            stopBtn.classList.add('opacity-50', 'cursor-not-allowed');
            
            statusDot.className = 'w-3 h-3 rounded-full bg-gray-500';
            statusText.textContent = '‡∏´‡∏¢‡∏∏‡∏î‡πÅ‡∏•‡πâ‡∏ß';
            scanOverlay.classList.add('opacity-0');
            placeholder.classList.remove('hidden');
            
            seconds = 0;
            document.getElementById('timer').textContent = '00:00';
        }

        async function init() {
            const modelURL = URL + "model.json";
            const metadataURL = URL + "metadata.json";

            try {
                model = await tmPose.load(modelURL, metadataURL);
                maxPredictions = model.getTotalClasses();
            } catch (e) {
                console.error('Model loading error:', e);
                maxPredictions = 3;
            }

            const size = 600;
            const flip = true;
            webcam = new tmPose.Webcam(size, size, flip);
            await webcam.setup();
            await webcam.play();
            
            isRunning = true;
            
            seconds = 0;
            timerInterval = setInterval(updateTimer, 1000);
            
            const canvas = document.getElementById("canvas");
            canvas.width = size;
            canvas.height = size;
            ctx = canvas.getContext("2d");
            
            document.getElementById('camera-placeholder').classList.add('hidden');
            document.getElementById('scan-overlay').classList.remove('opacity-0');
            
            const statusDot = document.getElementById('status-dot');
            const statusText = document.getElementById('status-text');
            statusDot.className = 'w-3 h-3 rounded-full bg-green-500 animate-pulse';
            statusText.textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå';

            labelContainer = document.getElementById("label-container");
            labelContainer.innerHTML = '';
            
            const predictionCount = maxPredictions || 3;
            for (let i = 0; i < predictionCount; i++) {
                const div = document.createElement("div");
                div.className = "bg-white/10 rounded-xl p-3 flex justify-between items-center";
                div.innerHTML = `
                    <span class="font-medium">Class ${i + 1}</span>
                    <div class="flex items-center gap-2">
                        <div class="w-32 h-2 bg-white/20 rounded-full overflow-hidden">
                            <div class="h-full bg-gradient-to-r from-orange-400 to-yellow-400 rounded-full transition-all duration-300" style="width: 0%"></div>
                        </div>
                        <span class="text-sm w-12 text-right">0%</span>
                    </div>
                `;
                labelContainer.appendChild(div);
            }
            
            document.getElementById('main-result').classList.remove('hidden');

            window.requestAnimationFrame(loop);
        }

        async function loop(timestamp) {
            if (!isRunning) return;
            
            webcam.update();
            await predict();
            window.requestAnimationFrame(loop);
        }

        async function predict() {
            if (!model || !webcam) return;
            
            try {
                const { pose, posenetOutput } = await model.estimatePose(webcam.canvas);
                const prediction = await model.predict(posenetOutput);

                let maxProb = 0;
                let maxClass = '';

                for (let i = 0; i < maxPredictions; i++) {
                    const prob = prediction[i].probability;
                    const className = prediction[i].className;
                    const percentage = (prob * 100).toFixed(1);
                    
                    if (prob > maxProb) {
                        maxProb = prob;
                        maxClass = className;
                    }

                    const container = labelContainer.childNodes[i];
                    if (container) {
                        const nameSpan = container.querySelector('span');
                        const progressBar = container.querySelector('.bg-gradient-to-r');
                        const percentSpan = container.querySelectorAll('span')[1];
                        
                        if (nameSpan) nameSpan.textContent = className;
                        if (progressBar) progressBar.style.width = percentage + '%';
                        if (percentSpan) percentSpan.textContent = percentage + '%';
                    }
                }

                const resultClass = document.getElementById('result-class');
                const resultConfidence = document.getElementById('result-confidence');
                const mainResult = document.getElementById('main-result');
                
                resultClass.textContent = maxClass;
                resultConfidence.textContent = (maxProb * 100).toFixed(1) + '%';
                
                if (maxProb > 0.8) {
                    mainResult.className = 'mt-4 p-4 rounded-xl text-center result-positive';
                    
                    const now = Date.now();
                    if (now - lastSuccessTime > 2000) {
                        playSuccessSound();
                        lastSuccessTime = now;
                    }
                } else if (maxProb > 0.5) {
                    mainResult.className = 'mt-4 p-4 rounded-xl text-center bg-yellow-500/50';
                } else {
                    mainResult.className = 'mt-4 p-4 rounded-xl text-center bg-white/10';
                }

                drawPose(pose);
            } catch (e) {
                console.error('Prediction error:', e);
            }
        }

        function drawPose(pose) {
            if (webcam && webcam.canvas) {
                ctx.drawImage(webcam.canvas, 0, 0);
                if (pose) {
                    const minPartConfidence = 0.5;
                    tmPose.drawKeypoints(pose.keypoints, minPartConfidence, ctx);
                    tmPose.drawSkeleton(pose.keypoints, minPartConfidence, ctx);
                }
            }
        }

        // Element SDK
        async function onConfigChange(newConfig) {
            const systemName = document.getElementById('system-name');
            const footerText = document.getElementById('footer-text');
            const evaluationTitle = document.getElementById('evaluation-title');
            const evaluationQuestion = document.getElementById('evaluation-question');
            
            if (systemName) {
                systemName.textContent = newConfig.system_name || defaultConfig.system_name;
            }
            if (footerText) {
                footerText.textContent = newConfig.footer_text || defaultConfig.footer_text;
            }
            if (evaluationTitle) {
                evaluationTitle.textContent = newConfig.evaluation_title || defaultConfig.evaluation_title;
            }
            if (evaluationQuestion) {
                evaluationQuestion.textContent = newConfig.evaluation_question || defaultConfig.evaluation_question;
            }
        }

        function mapToCapabilities(config) {
            return {
                recolorables: [],
                borderables: [],
                fontEditable: undefined,
                fontSizeable: undefined
            };
        }

        function mapToEditPanelValues(config) {
            return new Map([
                ['system_name', config.system_name || defaultConfig.system_name],
                ['footer_text', config.footer_text || defaultConfig.footer_text],
                ['evaluation_title', config.evaluation_title || defaultConfig.evaluation_title],
                ['evaluation_question', config.evaluation_question || defaultConfig.evaluation_question]
            ]);
        }

        // Initialize
        async function initApp() {
            if (window.elementSdk) {
                await window.elementSdk.init({
                    defaultConfig,
                    onConfigChange,
                    mapToCapabilities,
                    mapToEditPanelValues
                });
                config = window.elementSdk.config || defaultConfig;
                await onConfigChange(config);
            }

            if (window.dataSdk) {
                const result = await window.dataSdk.init(dataHandler);
                if (!result.isOk) {
                    console.error('Data SDK init failed');
                }
            }
        }

        initApp();
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9c1e624fb447a1ba',t:'MTc2OTA3NzkxMS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>